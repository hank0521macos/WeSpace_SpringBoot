CREATE DATABASE IF NOT EXISTS WeSpace;

use WeSpace;

-- 後台 --
CREATE TABLE MANAGER (
	MANAGER_ID INT AUTO_INCREMENT NOT NULL COMMENT '管理員ID',
	MANAGER_ACCOUNT VARCHAR(50) COMMENT '管理員帳號',
	MANAGER_PASSWORD VARCHAR(50) COMMENT '管理員密碼',
	MANAGER_EMAIL VARCHAR(50) COMMENT '管理員信箱',
	MANAGER_LOG VARCHAR(200) COMMENT '管理員日誌檔案',
	MANAGER_STATEMENT VARCHAR(200) COMMENT '報表檔案',
	CONSTRAINT MANAGER_MANAGER_ID_PK PRIMARY KEY (MANAGER_ID)
);

-- 會員 --
CREATE TABLE MEMBER (
	MEMBER_ID INT AUTO_INCREMENT NOT NULL COMMENT '會員ID',
	MEMBER_ACCOUNT VARCHAR(50) COMMENT '會員帳號',
	MEMBER_PASSWORD VARCHAR(50) COMMENT '會員密碼',
	MEMBER_EMAIL VARCHAR(50) COMMENT '會員信箱',
	MEMBER_FIRSTNAME VARCHAR(20) COMMENT '會員姓氏',
	MEMBER_LASTNAME VARCHAR(20) COMMENT '會員名字',
	MEMBER_MOBILE_PHONE VARCHAR(20) COMMENT '會員手機號碼',
	MEMBER_CREATE_TIME TIMESTAMP COMMENT '會員建立時間',
	MEMBER_VALIDATE_CODE VARCHAR(255) COMMENT '認證激活碼',
	MEMBER_TOKEN VARCHAR(255) COMMENT 'uuid',
	MEMBER_STATUS INT COMMENT '會員狀態',
	CONSTRAINT MEMBER_MEMBER_ID_PK PRIMARY KEY (MEMBER_ID)
);

-- 場地管理者 --
CREATE TABLE FACILITIES_OWNER (
	FACILITIES_OWNER_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地管理者ID',
	FACILITIES_OWNER_NAME VARCHAR(50) COMMENT '管理者名稱',
	FACILITIES_OWNER_IMAGE VARCHAR(200) COMMENT '管理者照片',
	FACILITIES_OWNER_DESCRIPTION TEXT COMMENT '管理者資訊',
	FACILITIES_OWNER_CONTACT_NAME VARCHAR(20) COMMENT '窗口稱呼',
	FACILITIES_OWNER_CONTACT_PHONE VARCHAR(20) COMMENT '窗口電話',
	FACILITIES_OWNER_CONTACT_MOBILE_PHONE VARCHAR(20) COMMENT '窗口手機',
	FACILITIES_OWNER_INVOICE_HEADING VARCHAR(200) COMMENT '管理者發票抬頭',
	FACILITIES_OWNER_TAX_ID VARCHAR(8) COMMENT '管理者發票統編',
	FACILITIES_OWNER_PAYEE_NAME VARCHAR(50) COMMENT '匯款戶名',
	FACILITIES_OWNER_PAYEE_BANK_NAME VARCHAR(50) COMMENT '匯款銀行名稱',
	FACILITIES_OWNER_PAYEE_BRANCH_NAME VARCHAR(50) COMMENT '匯款分行名稱',
	FACILITIES_OWNER_ACCOUNT VARCHAR(50) COMMENT '匯款帳號',
	MEMBER_ID INT COMMENT '會員id',
	CONSTRAINT FACILITIES_OWNER_FACILITIES_OWNER_ID_PK PRIMARY KEY (FACILITIES_OWNER_ID),
	CONSTRAINT FACILITIES_OWNER_MEMBER_ID_FK FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID)
);

-- 場地類型 --
CREATE TABLE FACILITIES_TYPE (
	FACILITIES_TYPE_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地類型ID',
	FACILITIES_TYPE_NAME VARCHAR(50) COMMENT '場地類型名稱',
	CONSTRAINT FACILITIES_TYPE_FACILITIES_TYPE_ID_PK PRIMARY KEY (FACILITIES_TYPE_ID)
);

INSERT INTO FACILITIES_TYPE (FACILITIES_TYPE_NAME)
VALUES ('會議'),('派對'),('聚會'),('私人談話'),('課程講座'),('運動'),('工作'),('展覽'),('音樂/表演'),('婚禮'),('拍照/攝影'),('美容'),('烹飪'),('儲物'),('發表會'),('親子活動'),('其他');

-- 場地服務與設備分類 --
CREATE TABLE FACILITIES_ITEMS_CATG (
	FACILITIES_ITEMS_CATG_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地服務與設備分類ID',
	FACILITIES_ITEMS_CATG_NAME VARCHAR(50) COMMENT '場地服務與設備分類名稱',
	CONSTRAINT FACILITIES_ITEMS_CATG_FACILITIES_ITEMS_CATG_ID_PK PRIMARY KEY (FACILITIES_ITEMS_CATG_ID)
);

INSERT INTO FACILITIES_ITEMS_CATG (FACILITIES_ITEMS_CATG_NAME)
VALUES ('基礎設備'),('會議 ‧ 辦公設備'),('影音設備'),('廚房設備'),('娛樂設備'),('附加設施'),('週邊設施'),('餐飲服務'),('服務'),('安全 ‧ 急救設備');

-- 場地服務與設備 --
CREATE TABLE FACILITIES_ITEMS (
	FACILITIES_ITEMS_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地服務與設備ID',
	FACILITIES_ITEMS_NAME VARCHAR(50) COMMENT '場地服務與設備',
	FACILITIES_ITEMS_CATG_ID INT COMMENT '場地設備分類',
	CONSTRAINT FACILITIES_ITEMS_FACILITIES_ITEMS_ID_PK PRIMARY KEY (FACILITIES_ITEMS_ID),
	CONSTRAINT FACILITIES_ITEMS_FACILITIES_ITEMS_CATG_FK FOREIGN KEY (FACILITIES_ITEMS_CATG_ID) REFERENCES FACILITIES_ITEMS_CATG (FACILITIES_ITEMS_CATG_ID)
);

INSERT INTO FACILITIES_ITEMS (FACILITIES_ITEMS_NAME,FACILITIES_ITEMS_CATG_ID)
VALUES ('桌子',1),('折疊桌',1),('椅子',1),('折疊椅',1),('沙發',1),('板凳',1),('冷氣',1),('廁所',1),('無線網路',1),('延長線',1),('飲水機',1),('黑板',2),('粉筆',2),('白板',2),('白板筆',2),('磁鐵',2),('事務機',2),('電腦',2),('投影機',3),('投影幕',3),('轉機頭',3),('投影筆',3),('螢幕/電視',3),('麥克風',3),('音響設備',3),('隔音設備',3),('相機/攝影機',3),('廚房',4),('餐具',4),('鍋具',4),('微波爐',4),('烤箱',4),('冰箱',4),('電磁爐',4),('卡拉OK',5),('電子遊戲機',5),('烤肉用具',5),('桌遊',5),('樂團設備',6),('包廂',6),('休息室',6),('電梯',6),('停車位',6),('戶外空間',6),('攝影棚',6),('無障礙空間',6),('舞台',6),('泳池',6),('大眾運輸系統',7),('停車場',7),('便利商店．超市',7),('餐飲店',7),('飲料提供',8),('餐點提供',8),('外燴服務',8),('可帶外食',8),('現場人員駐點',9),('可吸菸',9),('可烹調',9),('可帶小孩',9),('寵物友善',9),('自由調整擺設',9),('垃圾代收',9),('滅火器',10),('地震包',10),('緩降機',10),('急救箱',10),('灑水器',10),('煙霧偵測器',10),('火災警報器',10);

-- 場地開放日 --
CREATE TABLE FACILITIES_OPENING (
	FACILITIES_OPENING_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地開放日ID',
	FACILITIES_OPENING_NAME VARCHAR(50) COMMENT '場地開放日名稱',
	CONSTRAINT FACILITIES_OPENING_FACILITIES_OPENING_ID_PK PRIMARY KEY (FACILITIES_OPENING_ID)
);

INSERT INTO FACILITIES_OPENING (FACILITIES_OPENING_NAME)
VALUES ('週一'),('週二'),('週三'),('週四'),('週五'),('週六'),('週日');

-- 場地資訊 --
CREATE TABLE FACILITIES (
	FACILITIES_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地ID',
	FACILITIES_NAME VARCHAR(50) COMMENT '場地名稱',
	FACILITIES_RULES VARCHAR(200) COMMENT '場地規範',
	FACILITIES_CANCELLATION_POLICY VARCHAR(200) COMMENT '場地退費資訊',
	FACILITIES_CITY VARCHAR(200) COMMENT '場地所在城市',
	FACILITIES_TOWN VARCHAR(200) COMMENT '場地所在地區',
	FACILITIES_ADDRESS VARCHAR(200) COMMENT '場地地址',
	FACILITIES_BYTRAIN VARCHAR(200) COMMENT '搭捷運',
	FACILITIES_BYBUS VARCHAR(200) COMMENT '搭公車',
	FACILITIES_BYCAR VARCHAR(200) COMMENT '搭汽車',
	FACILITIES_SIZE INT COMMENT '場地大小',
	FACILITIES_GUESTS INT COMMENT '場地容納人數',
	FACILITIES_OWNER_ID INT COMMENT '場地管理者',
	FACILITIES_STATUS INT COMMENT '場地狀態',
	MEMBER_ID INT COMMENT '建立者會員ID',
	FACILITIES_MIN_BUDGET DECIMAL(8,1) COMMENT '場地最低價格',
	FACILITIES_MAX_BUDGET DECIMAL(8,1) COMMENT '場地最高價格',
	FACILITIES_START_TIME VARCHAR(20) COMMENT '場地最早開放時間',
	FACILITIES_CLOSE_TIME VARCHAR(20) COMMENT '場地最晚關閉時間',
	FACILITIES_MIN_OPENING_DAY INT COMMENT '場地最早開放日',
	FACILITIES_MAX_OPENING_DAY INT COMMENT '場地最晚開放日',
	CONSTRAINT FACILITIES_FACILITIES_ID_PK PRIMARY KEY (FACILITIES_ID),
	CONSTRAINT FACILITIES_FACILITIES_OWNER_ID_FK FOREIGN KEY (FACILITIES_OWNER_ID) REFERENCES FACILITIES_OWNER (FACILITIES_OWNER_ID),
	CONSTRAINT FACILITIES_MEMBER_ID_FK FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID)
);

-- 場地圖片 --
CREATE TABLE FACILITIES_IMAGES (
	FACILITIES_IMAGES_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地圖片ID',
	FACILITIES_IMAGES_NAME VARCHAR(200) COMMENT '場地圖片',
	FACILITIES_ID INT COMMENT '場地照片',
	CONSTRAINT FACILITIES_IMAGES_FACILITIES_IMAGES_ID_PK PRIMARY KEY (FACILITIES_IMAGES_ID),
	CONSTRAINT FACILITIES_IMAGES_FACILITIES_ID_FK FOREIGN KEY (FACILITIES_ID) REFERENCES FACILITIES (FACILITIES_ID)
);

-- 場地類型細項 --
CREATE TABLE FACILITIES_TYPE_DETAIL (
	FACILITIES_ID INT NOT NULL COMMENT '場地ID',
	FACILITIES_TYPE_ID INT NOT NULL COMMENT '場地類型ID',
	PRIMARY KEY (FACILITIES_ID,FACILITIES_TYPE_ID)
);

-- 場地服務與設備細項 --
CREATE TABLE FACILITIES_ITEMS_DETAIL (
	FACILITIES_ID INT NOT NULL COMMENT '場地ID',
	FACILITIES_ITEMS_ID INT NOT NULL COMMENT '場地服務與設備ID',
	PRIMARY KEY (FACILITIES_ID,FACILITIES_ITEMS_ID)
);

-- 場地時間細項 --
CREATE TABLE FACILITIES_OPENING_DETAIL (
	FACILITIES_OPENING_DETAIL_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地ID',
	FACILITIES_ID INT NOT NULL COMMENT '場地ID',
	FACILITIES_OPENING_ID INT NOT NULL COMMENT '場地開放日ID',
	FACILITIES_OPENING_START VARCHAR(20) COMMENT '場地開始時間',
	FACILITIES_OPENING_CLOSE VARCHAR(20) COMMENT '場地關閉時間',
	FACILITIES_OPENING_EXPENSE DECIMAL(8,1) COMMENT '場地時間價格',
	PRIMARY KEY (FACILITIES_OPENING_DETAIL_ID),
	FOREIGN KEY (FACILITIES_ID) REFERENCES FACILITIES (FACILITIES_ID),
	FOREIGN KEY (FACILITIES_OPENING_ID) REFERENCES FACILITIES_OPENING (FACILITIES_OPENING_ID)
);

-- 場地評論 --
CREATE TABLE FACILITIES_REVIEW (
	FACILITIES_REVIEW_ID INT AUTO_INCREMENT NOT NULL COMMENT '場地評論ID',
	FACILITIES_REVIEW_TIME TIMESTAMP COMMENT '評論時間',
	FACILITIES_REVIEW_STARS INT COMMENT '評論星數',
	FACILITIES_REVIEW_DESCRIPTION TEXT COMMENT '評論內容',
	MEMBER_ID INT COMMENT '評論會員',
	FACILITIES_ID INT COMMENT '評論場地',
	CONSTRAINT FACILITIES_REVIEW_FACILITIES_REVIEW_ID_PK PRIMARY KEY (FACILITIES_REVIEW_ID),
	CONSTRAINT FACILITIES_REVIEW_MEMBER_ID_FK FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID),
	CONSTRAINT FACILITIES_REVIEW_FACILITIES_ID_FK FOREIGN KEY (FACILITIES_ID) REFERENCES FACILITIES (FACILITIES_ID)
);

-- 訂位訂單 --
CREATE TABLE ORDERS (
	ORDERS_ID INT AUTO_INCREMENT NOT NULL COMMENT '訂單ID',
	ORDERS_DESCRIPTION VARCHAR(200) COMMENT '訂單描述',
	ORDERS_DATE DATETIME COMMENT '活動日期',
	ORDERS_PERIOD_START INT COMMENT '活動開始時段',
	ORDERS_PERIOD_END INT COMMENT '活動結束時段',
	ORDERS_EXPENSE DECIMAL(8,1) COMMENT '訂單費用',
	ORDERS_GUESTS INT COMMENT '使用人數',
	ORDERS_NOTE TEXT COMMENT '訂單備註',
	ORDERS_CONTACT_NAME VARCHAR(50) COMMENT '聯絡人姓名',
	ORDERS_CONTACT_MOBILE_PHONE VARCHAR(20) COMMENT '聯絡人手機',
	ORDERS_CONTACT_EMAIL VARCHAR(50) COMMENT '聯絡人信箱',
	ORDERS_CREDIT_CARD_NO VARCHAR(50) COMMENT '信用卡卡號',
	ORDERS_CREDIT_CARD_MONTH VARCHAR(10) COMMENT '信用卡到期月',
	ORDERS_CREDIT_CARD_YEAR VARCHAR(10) COMMENT '信用卡到期年',
	ORDERS_CREDIT_CARD_CVC INT COMMENT '信用卡驗證碼',
	ORDERS_TIME TIMESTAMP COMMENT '訂單生成時間',
	ORDERS_STATUS INT COMMENT '訂單狀態',
	MEMBER_ID INT COMMENT '訂購人',
	FACILITIES_ID INT COMMENT '租借場地',
	FACILITIES_TYPE_ID INT COMMENT '場地使用目的',
	CONSTRAINT ORDERS_ORDERS_ID_PK PRIMARY KEY (ORDERS_ID),
	CONSTRAINT ORDERS_MEMBER_ID_FK FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER (MEMBER_ID),
	CONSTRAINT ORDERS_FACILITIES_ID_FK FOREIGN KEY (FACILITIES_ID) REFERENCES FACILITIES (FACILITIES_ID),
	CONSTRAINT ORDERS_FACILITIES_TYPE_ID_FK FOREIGN KEY (FACILITIES_TYPE_ID) REFERENCES FACILITIES_TYPE (FACILITIES_TYPE_ID)
);
